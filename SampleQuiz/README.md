# Quizめも

- RDSを削除すると
  - 自動スナップショットが削除される
  - 手動スナップショットは保持される
  
- VPCサブネットのデフォルト最大数
  - 200
  
- ボリュームステータスチェックは5分ごとに成功か失敗のステータスを返す

- VM Import/Exportに未対応なディストイリビューション
  - 32bit
  - Redhat6.0

- NATインスタンスを利用する場合は SrcDestCheck(送信元/送信先チェックを無効)にする

- s3について
  - オブジェクトの最大サイズは5TB
  - イレブン9は堅牢性、可用性は99.99%
  
- ブロックデバイスで 
  - `/dev/sda` : ルート用
  - `/dev/sd[b-e]` : インスタンスストア
  - `/dev/sd[f-p]` : EBSボリューム
  
- RDS
  - RDSのストレージ最大サイズは6TB
  - SQLサーバは4TB
  - RDSの自動バックアップは5分ごとにトランザクションログを取得している
  - Multi-AZの場合、スタンバイ側はリード処理はできない。必要な場合はリードレプリカを使う
  - シングルAZの場合はスナップショットの取得中のI/Oは数分以内で中断する
  - Multi-AZだとI/O中断の影響は受けない
  - SSLをもちいてアプリケーションとDBインスタンスの間を暗号化接続できる
  - 静的パラメータを変更する場合はDBインスタンスの再起動が必要
  - Backup Retension Periodを0にすると、自動バックアップが無効になる. リードレプリカの作成と時刻指定のリストアのボタン自体も無効になる
  - MySQLのソースDBを消すとリードレプリカは削除されず、そのままリードだけ可能になる
  - RDS for PostgresSQLのDBインスタンスを削除するとリードレプリカが昇格して読み書きが可能になる
  - RDSのバックアップ保持期間は最大35日まで（デフォルト7日間）
  - SQL Serverはmasterデータベースにログインとパスワードを格納する
  - Multi-AZでフェイルおーばが発生すると、正規名レコード(CNAME)をプライマリからセカンダリに変更される
  - フェイルオーバの時間は 60s -120s
  - DBセキュリティグループのイベント通知を利用できる
  - DNSを使用してシームレスな移行のためにスタンバイレプリカに切り替える

- S3
  - 3箇所以上のデータセンターで同期している
  - 新しいオブジェクトのPUTは「書き込み後の読み込み」整合性
  - 米国スタンダードリージョンのS3バケットのみ結果整合性
  - PUTおよびDELETEの上書きについては結果整合性
  - マルチアップロードではあれば、アップロードのサスペンド・レジュームは可能(通常の方法では不可)
  - オブジェクトの最大は5TB
  - 100MB以上のファイルはマルチアップロードが推奨
  - 重要なファイルの削除ミスを防ぐには、バージョニング管理とMFAを有効にする
  - マルチアップロードでスループットが改善される
 
- AWSの規約
  - AWS側の瑕疵でもデータ漏洩したら、ユーザの責任
  - AWSがサービス撤退は30日以内にユーザ通知すればよい
  - AWSはいつでも利用規約を変更できる
  
- EBS
  - ボリュームのために利用可能だが推奨しないのは, RAID5. RAID6
  - プレイスメントグループを削除する場合、インスタンスを終了する必要がある
  - EBSボリューム数の制限は5,000 スナップショット数は10,000
  - AES-256 インスタンスホスト上で暗号化処理される
  - 作成済みのボリュームは暗号化できない。作成時に暗号化設定をする

- SNS
  - 通知のsubscriber: Lambda/SQS/HTTP(s)/Email/SMS

- Billing
  - 請求アラームを作成するには請求アラートを有効にする
  - 連結アカウントに属するためには、一括請求管理している管理者に要求する
  
- ElasticCache/Memchached
  - Evictions: 新しく書き込むための領域を確保するためにキャッシュが排除した期限切れでない項目の数
  - GetMisses: キャッシュが受信したが、リクエストされたキーが見つからなかった数

- EC2Config Service
  - EBSボリューム、インスタンスストアボリュームをフォーマットおよび、マウントしボリューム名をドライブ文字にマップすることができる

- DynammoDBは
  - NULL
  - コレクションデータ型
  - スカラーデータ型(数値・文字列・バイナリ・ブール)

- CloudWatch
  - SSDの場合は5分間隔
  - Provisioned IOPSは1分間隔で自動送信する
  - regionをまたがってデータを収集できない
  - Cloudwatchへのメトリクスをputする場合はIAM-Roleを使う
  - CloudWatchアラームにアクションでインスタンスを停止・終了させることができる
  - SNSと連携すると、自動スケーリングを設定すると特定のアカウントでインスタンスが多すぎると通知できる
  - 統計: Min/Max/Sum/Ave/SampleCount
  - ユーザがキャプチャしたデータをCloudwatchのカスタムメトリクスをサポートしている.(CLI or APIで可能)
  - CLIを利用してアラーム状態をアラームに設定し、SNSで通知テストを実施できる

- EC2
  - EC2のタグについてはkeyが127文字、値が255文字
  - インスタンスストア領域は再起動では消えない。停止すると消える
  - システム状態がimpairedの場合はホストが壊れている可能性がある。対処としてインスタンスを停止して開始する。
  - 再起動では別のホストに移動せずに起動する。停止→起動だと別のホスト上で起動する
  

- Route53
  - デフォルトのヘルスチェク間隔は30s
  - 加重ルーティング/レイテンシーベースルーティング
  - zone apexはRoute53のAliasレコードを使用する

- 無料枠
  - EC2: 750時間 t2.micro
  - RDS: 750時間
  - S3: 5GB

- AS
  - 終了保護をつけてASGのインスタンスの終了保護を防止できない
  - 終了ポリシーで最初に終了させるインスタンスを指定することができる
  - 最後のインスタンスが起動するとクールダウン期間が有効になる
  - ユーザアクション中はスケールアウトが中断される
  - スポットインスタンスの場合は入札が完了してから有効になる
  - スケジュールのアクションは、一位の時間値が必要で、他のスケジューリングと競合するとエラーメッセージが表示される
 
- Glacier
  - 1ファイル40TBまで
  
- Elasitc Transcoder
  - トランスコーディング（パイプライン）の数は各ユーザで制限されている
   
- SQS
  - AppがEC2とSQS間で十分な帯域保証するには、EC2インスタンスをスケーラブルにする必要がある
  - 4日間メッセージを保持する。最大で14日間保持できる

- AWS側のセキュリティ
  - DDos
  - MITM
  - IPスプーフィング
  - ポートスキャン
  - パケットスニッフィング

- ELB
  - スティッキーセッション: ユーザのセッションを特定のアプリケーションインスタンスにバインドする。
    - ユーザのセッション中のすべてのリクエストが同じインスタンスに送信される
  - webソケットなどの長いポーリングを使用していると同じバックエンドインスタンスに接続することになる
  - connection Draining
  - Pre-Warmingでスケールする. 間に合わないと503を返す
  - ログ間隔は5分 or 60分で指定できる
  - バケット名/Prefix/awsアカウントID/region/タイムスタンプ/ロードバランサ名/end-time/ELB-IP/random-stringが含まれる

- CloudFormation
  - WaitConditionリソースを使用すると設定プロセスのステータスを追跡できる
  - スタックの作成が失敗したら、作成したリソースを削除してロールバックする
  - リソースに重点をおいて自動化する(S3からダウンロードやELBのセットアップなど)
 

