# s3について

- ストレージクラス
  - スタンダード
  - STANDARD-IA(格納コストは安価だが、データのよみ出し容量に対して課金)
  - Glacier
  - RRS(Reduced Redundancy Storage) Glacierから取り出したデータの置き場所として利用

- S3のData Consistencyモデル
  - 複数の場所に複製することで高い可用性を実現するため、データの更新・削除には　`結果整合性` が採用
  - 新規登録: 登録後、即時データが参照可能
  - 更新: 更新直後は、以前のデータが参照される可能性がある
  - 削除: 削除直後は、削除前のデータが参照される可能性がある

- S3の操作
  - GET/PUT/LIST/COPY/DELETE
  - HEAD: オブジェクトのメタデータを取得
  - RESTORE: アーカイブされたオブジェクトを一時的にS3に取り出し
  
- アクセス管理 
  - ユーザポリシー
    - IAMユーザに対して、s3やバケットへのアクセス権限を設定
    - 複数バケットやs3以外のものも含めて、一元的にユーザ権限を指定する場合
    - Condition要素を利用して接続元IPアドレス制限なども指定できる
  - バケットポリシー 
    - s3バケットごとに、アクセス権限を指定
    - クロスアカウントでのs3バケットアクセス権を付与する場合
    - Condition要素を利用して接続元IPアドレス、IAMユーザ、クロスアカウント、CloudFront,MFA制限なども可能
  - ACL
    - 各バケットおよび、オブジェクトのアクセス権限を指定
    - バケット単位やオブジェクト単位で簡易的に権限を付与する場合
    - ユーザポリシーやバケットポリシーが優先される
    - バケットACLよりオブジェクトACLが優先される
  
- Pre-signed Object URL(署名付きURL)
  - SDKを利用して生成される署名されたURLを利用して、s3上のプライベートなオブジェクトに対して一定時間アクセスを許可
  - GET/PUTが利用可能

- webサイトホスティング機能
  - バケット単位で指定
    - Management Consoleから設定可能
    - パブリックアクセスを許可するために、別途、バケットポリシーで全ユーザにGET権限を付与
  - 独自ドメインの 指定
    - ドメイン名をバケット名として指定
      - 通常は `http://バケット名.s3-website-<region>.amazon.com`
    - 　Route53のAlias設定でドメイン名S3のバケット名を紐付けたレコードを登録
  - リダイレクト機能

