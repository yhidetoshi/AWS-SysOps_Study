# ELBについて

- 負荷分散
  - バックエンドインスタンス
    - リクエスト数/コネクション数が均等になるように負荷分散
  - ELB自体
    - ELBも負荷に増減して自動スケール
    - DNS名で登録すること

- ヘルスチェック
  - Pingプロトコル
  - Pingポート
  - Pingパス (/index.html)
  - タイムアウト時間
  - ヘルスチェック間隔
  - 異常判定までの回数
  - 正常判定までの回数
  
- 料金 
  - 重量課金 
  - リザーブドなし

- 独自ドメイン名で利用
  - Route53以外のDNSを利用する場合は `CNAME` で登録
  - Route53の場合は `Aレコードのエイリアス` で登録
  - Zone Apex (example.com) の場合は CNAMEは設定不可/エイリアスレコードを利用することで実現可能

- クライアントのIPアドレス
  - バックエンドサーバへの接続はソースIPアドレスがELBのIPアドレスとなる
    - アクセスログにはELBのIPアドレスが記録される
  - HTTP/HTTPSなら `X-Forwarded-For` を参照できる
 
- AZとバックエンドキャパシティの関係
  - リージョン内の複数AZ負荷分散可能
    - 複数リージョンへの分散はRoute53を利用
     
- ELB自体のスケーリング
  - 自動でスケールするがスケーリングが間に合わない場合は HTTP 503を返す
  - 事前に申請しておく。 `Pre-Warming (Bussiness/Enterpriseサポートが必要)`
